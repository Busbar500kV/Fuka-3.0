{
  "seed": 0,
  "frames": 2000,
  "space": 64,

  "k_flux": 0.08,
  "k_motor": 0.20,
  "diffuse": 0.05,
  "decay": 0.05,
  "band": 3,
  "bc": "reflect",

  "env": {
    "length": 256,
    "height": 256,
    "frames": 2000,
    "noise_sigma": 0.01,
    "sources": [
      {
        "kind": "moving_peak_2d",
        "amp": 1.0,
        "speed_x": 0.015,
        "speed_y": 0.010,
        "width_x": 6.0,
        "width_y": 6.0,
        "start_x": 64,
        "start_y": 64
      },
      {
        "kind": "moving_peak_2d",
        "amp": 0.8,
        "speed_x": -0.012,
        "speed_y": 0.018,
        "width_x": 8.0,
        "width_y": 8.0,
        "start_x": 192,
        "start_y": 160
      },
      {
        "kind": "moving_peak",
        "amp": 0.6,
        "speed": 0.02,
        "width": 5.0,
        "start": 128,
        "y_center": "mid",
        "width_y": 18.0
      }
    ]
  },

  "chunk": 150,
  "live": true,

  "thr3d": 0.75,
  "max3d": 40000,

  "vis": {
    "heat_floor": 0.10,
    "heat_gamma": 1.0,
    "env_opacity": 1.0,
    "sub_opacity": 0.85
  },

  "physics": {
    "alpha_speed": 0.90,
    "beta_speed": 1.00,
    "flux_limit": 0.20,
    "boundary_leak": 0.01,
    "update_mode": "random",
    "T": 0.001
  }
}
"fuka3": {
  "simulation": {
    "dt": 1.0,
    "steps_per_frame": 1,
    "max_frames": 2000,
    "rng_seed": 0,
    "deterministic": true,
    "checkpoint_interval": 0,
    "autosave_snapshots": false,
    "snapshot_stride": 100,
    "warmup_ticks": 0
  },

  "numerics": {
    "integrator": "euler",          // euler | semi_implicit | rk2
    "epsilon": 1e-8,
    "grad_clip": 5.0,
    "value_clip": 1e6,
    "stencil": "von_neumann",       // von_neumann | moore
    "stability_cfl": 0.9,
    "float_dtype": "float32",
    "nan_guard": true
  },

  "scheduler": {
    "tick_order": "connections_first", // connections_first | events_first
    "selection": "random",             // random | priority | sweep
    "batch_size": 4096,
    "parallel_chunksize": 0
  },

  "buffers": {
    "entropy_window": 16,
    "history_ring": 32,
    "metrics_ring": 256
  },

  "limits": {
    "max_connections": 200000,
    "max_attractors": 20000,
    "max_degree_per_event": 6,
    "max_energy_per_event": 1e9,
    "min_free_energy_floor": 0.0
  },

  "init": {
    "lattice_topology": "grid2d",   // grid2d | grid3d | custom_graph
    "neighbor_radius": 1,
    "initial_free_energy": 0.5,
    "initial_bound_energy": 0.0,
    "seed_connections": "orthogonal", // none | random | orthogonal | ring
    "seed_density": 0.02
  },

  "io": {
    "run_dir": "runs/fuka3",
    "write_trace": false,
    "trace_stride": 10,
    "save_video": false,
    "video_stride": 4
  },

  "metrics": {
    "stride": 10,
    "collect": [
      "entropy_mean",
      "entropy_p95",
      "free_energy_total",
      "bound_energy_total",
      "temperature_mean",
      "connections_alive",
      "attractors_alive",
      "avg_integration",
      "avg_fitness",
      "work_paid_per_tick",
      "dissipation_per_tick"
    ]
  },

  "debug": {
    "log_level": "warn",            // debug | info | warn | error
    "assertions": true,
    "profile_timing": false,
    "sample_ids": 16
  },

  "visual": {
    "draw_energy": false,
    "draw_temperature": false,
    "draw_stability": false,
    "draw_integration": false
  },

  "energy": {
    "source_locations": [],         // list of coordinates/indices
    "source_rate": 1.0,             // S_i^+ per tick
    "transport_conductance": 0.15,  // gamma_ij
    "use_potential_smoothing": true,
    "boundary_leak": 0.0,
    "work_to_dissipation_fraction": 0.9,
    "step_cost_coeff": 0.01,        // c_theta
    "alpha_energy_per_entropy": 1.0,// alpha_E
    "refund_fraction_on_prune": 0.0
  },

  "temperature": {
    "T0": 0.001,
    "beta_bound": 0.01,             // B→T coupling
    "beta_signal": 0.0,             // Var(Δs)→T (optional)
    "use_edge_temperature": false
  },

  "connection": {
    "init": {
      "amplitude_range": [0.05, 0.15],
      "frequency_range": [0.05, 0.25],
      "phase_range": [0.0, 6.28318530718],
      "curvature_range": [0.0, 0.1],
      "plasticity_range": [0.01, 0.05]
    },
    "learning": {
      "eta": 0.05,
      "entropy_window": 16,
      "entropy_kind": "variance",   // variance | autocorr
      "update_schedule": "random",  // random | sweep
      "flux_limit": 0.2
    }
  },

  "denoising": {
    "use_sinusoid_term": true,
    "kappa_scale": 1.0,
    "gradient_clip": 1.0,
    "min_entropy_drop": 0.0
  },

  "morphology": {
    "stability_threshold_grow": 0.6,
    "stability_threshold_prune": 0.15,
    "max_degree_per_event": 6,
    "growth_energy_toll": 0.1,
    "growth_integration_coeff": 0.5,
    "prune_refund_fraction": 0.0,
    "spawn_bias_from_parent": 0.5,
    "neighbor_scan_radius": 1
  },

  "integration": {
    "sigma_theta": 0.5,             // in exp(-||Δθ||^2 / σ^2)
    "fitness_efficiency_mix": 1.0   // weight for energetic-efficiency factor
  },

  "attractors": {
    "spawn_prob": 0.01,
    "spawn_energy": 0.05,
    "maint_cost_rate": 0.001,
    "decay_rate": 0.01,
    "amplitude_init": 0.05,
    "amplitude_min": 0.005,
    "radius": 1,
    "eta_amplitude": 0.1,
    "sigma_theta": 0.5,
    "sigma_signal": 0.5,
    "propagate_energy": 0.05,
    "feature_map": "meanvar"       // meanvar | bandpower
  }
}